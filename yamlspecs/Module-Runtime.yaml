---
- package: Module::Runtime Perl module 
  name: Module-Runtime
  category: perl module
  versions: !include perl_versions.yaml 
  version: "{{ versions.module_runtime }}"
  extension: tar.gz
  download_file: "{{ name }}-{{ version  }}.{{ extension }}"
  vendor_source: http://www.cpan.org/authors/id/Z/ZE/ZEFRAM/{{ download_file }}
  src_tarball: "{{ download_file }}"
  pkgname: "perl_{{ versions.perl }}-{{ name }}"
  description: >
    Module::Runtime - runtime module handling

  root: "{{ pkg_defaults.app_path }}/perl/{{ versions.perl }}"
  prefix: "{{ root }}" 

  addfile: 
    - filter-requires-perlmodules.sh
    - filter-provides-perlmodules.sh

  build:
    configure: perl
    configure_args: Makefile.PL INSTALLL_BASE=$(PKGROOT)
    modules: 
      - "perl/{{ versions.perl }}"
    target: 

  install:
    makeinstall: $(MAKE); $(MAKE) DESTDIR=$(ROOT) pure_install; find $(ROOT) -type f -name .packlist -delete; find $(ROOT) -depth -type d -empty -delete

  files:
    - "{{ root }}/lib/site_perl/{{ versions.perl }}/Module/Runtime*"
    - "{{ root }}/man/man3/*" 

  rpm: !include rpm.extras.perlmodules.yaml
